<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Yuki Naito, Python port">
    <title>PyDiff Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ”</text></svg>">
</head>
<body>
    <div class="container">
        <div id="top">
            <div class="header">
                <h1 class="title">
                    <a class="title-link" href="/">ğŸ“ PyDiff Tool</a>
                </h1>
            </div>
        </div>

        <div id="form">
            {% if error %}
            <div class="error-message">
                {{ error | e }}
            </div>
            {% endif %}
            <p>
                Compare two texts and highlight the differences.<br>
                Enter the texts you want to compare in the left and right text areas, then click the "Compare" button.
            </p>
            
            <form method="POST" id="difff" name="difff" action="/">
                <table class="input-table">
                    <tr>
                        <td class="input-cell">
                            <textarea name="sequenceA" rows="20" placeholder="Enter the original text here...">{{ text_a | e }}</textarea>
                        </td>
                        <td class="input-cell">
                            <textarea name="sequenceB" rows="20" placeholder="Enter the comparison text here...">{{ text_b | e }}</textarea>
                        </td>
                    </tr>
                </table>
                
                <button type="submit" class="compare-btn">
                    ğŸ” Compare
                </button>
            </form>
        </div>

        {% if show_result %}
        <div id="result">
            <h2 style="color: var(--gray-700); font-size: 20px; font-weight: 600; margin-bottom: 20px; text-align: center;">
                ğŸ“Š Comparison Results
            </h2>
            
            <table class="result-table">
                {% for row in comparison_result %}
                <tr>
                    <td>{{ row.text_a | safe }}</td>
                    <td>{{ row.text_b | safe }}</td>
                </tr>
                {% endfor %}
                
                <!-- Statistics row -->
                <tr>
                    <td class="stats">
                        <div class="stats-text">
                            <strong>ğŸ“ˆ Statistics (Left)</strong><br>
                            Characters: {{ stats_a.chars_only | int }}<br>
                            Spaces: {{ (stats_a.with_spaces - stats_a.chars_only) | int }}<br>
                            Line breaks: {{ (stats_a.with_newlines - stats_a.with_spaces) | int }}<br>
                            Words: {{ stats_a.words | int }}
                        </div>
                    </td>
                    <td class="stats">
                        <div class="stats-text">
                            <strong>ğŸ“ˆ Statistics (Right)</strong><br>
                            Characters: {{ stats_b.chars_only | int }}<br>
                            Spaces: {{ (stats_b.with_spaces - stats_b.chars_only) | int }}<br>
                            Line breaks: {{ (stats_b.with_newlines - stats_b.with_spaces) | int }}<br>
                            Words: {{ stats_b.words | int }}
                        </div>
                    </td>
                </tr>
            </table>

            <div class="controls">
                <div style="text-align: center;">
                    <span style="color: var(--gray-600); font-weight: 600; font-size: 16px;">ğŸ¨ Color Theme</span>
                    <div style="margin-top: 15px;">
                        <label style="margin: 0 15px; cursor: pointer; display: inline-block;">
                            <input type="radio" name="color" value="1" onclick="setColor1()" checked style="margin-right: 8px;">
                            <span class="blue">Blue</span>
                        </label>
                        <label style="margin: 0 15px; cursor: pointer; display: inline-block;">
                            <input type="radio" name="color" value="2" onclick="setColor2()" style="margin-right: 8px;">
                            <span class="green">Green</span>
                        </label>
                        <label style="margin: 0 15px; cursor: pointer; display: inline-block;">
                            <input type="radio" name="color" value="3" onclick="setColor3()" style="margin-right: 8px;">
                            <span class="black">Monochrome</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <script src="{{ url_for('static', path='js/script.js') }}"></script>
</body>
</html>